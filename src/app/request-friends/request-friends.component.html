<app-header></app-header>

<div class="sidenav left">
  <div class="friend_list">
    <h3>Friends</h3>
  </div>
  <div class="receive_request" *ngIf="friend_req_hidden">
    {{frd_req_get_count}} friend requests
    <div class="row" style="padding: 10px;" *ngFor="let frdProfile of frd_profile_datas;let i = index">
      <div class="col-md-12" (click)="openProfile(frdProfile._id);">
        <img width="60" height="60" [src]="frdProfile.profileImgURl" onerror="this.src='/assets/images/default_user.jpg';" style="border-radius: 50%;" />
        <label style="color: #ffffff;margin-left: 10px;position: absolute;">{{frdProfile.name}}</label>
      </div>
      <div class="col-md-12" style="margin-left: 70px;bottom: 15px;">
        <button type="button" name="button" style="background-color: #1e4a6b;border-color:#1e4a6b;" [hidden]="accept_hideme[i] || hideme[i]" class="btn btn-primary" (click)="confirm_request(frdProfile._id);accept_hideme[i] = !accept_hideme[i];hideme[i] = hideme[i];">Confirm</button>
        <button type="button" name="button" style="margin-left: 15px;" class="btn btn-secondary" [hidden]="hideme[i] || accept_hideme[i]" (click)="reject_request(frdProfile._id);hideme[i] = !hideme[i];accept_hideme[i] = accept_hideme[i]">Delete</button>
        <label [hidden]="!accept_hideme[i] || hideme[i]">Accept request</label>
        <label [hidden]="!hideme[i] || accept_hideme[i]">Reject request</label>
      </div>
    </div>
  </div>
  <div class="peopleknow_label">
    <h6 class="people_title">People you may know</h6>
  </div>
  <div class="row" style="padding: 10px;" *ngFor="let data of datas;let i = index">
    <div class="col-md-12 remove_people remove_people_{{data._id}}" (click)="openProfile(data._id);">
      <img width="60" height="60" [src]="data.profileImgURl" onerror="this.src='/assets/images/default_user.jpg';" style="border-radius: 50%;" />
      <div class="request_shows">
      <label >{{data.name}}</label>
      <!-- <label style="color: #ffffff">{{data._id}}</label> -->
      <div class="remove_people_{{data._id}}">
        <button type="button" *ngIf="friend_id.includes(data._id) != true" class="btn btn-primary add_friend_btn add_friend_{{data._id}}" [hidden]="hideme[i]" (click)="sendRequest(data._id);hideme[i] = !hideme[i];">Add Friend</button>
        <button type="button" class="btn btn-secondary show_add_friend show_add_friend_{{data._id}}" *ngIf="hideme[i] || friend_id.includes(data._id)" (click)="remove_send_request(data._id);hideme[i] = hideme[i];">Cancel Request</button>
        <button type="button" class="btn btn-secondary remove_friend_btn remove_friend_{{data._id}}" [hidden]="hideme[i]" *ngIf="friend_id.includes(data._id) != true" (click)="remove_people(data._id)">Remove</button>
  
        <!-- <button type="button" id="add_{{data._id}}" class="btn btn-primary add_friend_btn add_friend_{{data._id}}" (click)="sendRequest(data._id);">Add Friends</button>
        <button type="button" class="btn btn-secondary cancel_friend_{{data._id}}" *ngIf="hide_cancel_req != true" (click)="remove_send_request(data._id);">Cancel Request</button>
        <button type="button" class="btn btn-secondary remove_friend_btn remove_friend_{{data._id}}" (click)="remove_people(data._id)">Remove</button> -->
  
        <!-- <button type="button" style="background-color: #1e4a6b;border-color:#1e4a6b;" class="btn btn-primary add_friend_{{data._id}}" (click)="sendRequest(data._id);">Add Friends</button>
        <button type="button" class="btn btn-secondary show_add_friend_{{data._id}}" (click)="remove_send_request(data._id);">Cancel Request</button>
        <button type="button" style="margin-left: 15px;" class="btn btn-secondary remove_friend_{{data._id}}" (click)="remove_people(data._id)">Remove</button> -->
      </div>
    </div>
    </div>
  </div>
</div>

<div class="viewProfile" style="justify-content: center;display: flex;height:100%" *ngIf="showView != true">
  <div class="container" style="position: relative;">
    <div class="vertical-center" style="position: inherit;top: 50%;transform: translateY(-50%);text-align: center;">
      <div>
        <img width="60" height="60" src='/assets/images/user.png' style="border-radius: 50%;" />
      </div>
      <div class="display_people_data">
        Select people's names to preview their profile.
      </div>
    </div>
  </div>
</div>

<div class="viewProfile" style="margin-left: 20.0rem;padding-top: 101px;" *ngIf="showView">
  <div class="cover_pic" [ngStyle]="{ 'background-image': 'url(' + imageCov + ')'}"></div>

  <div class="bg-white profile_navbar">
  	<div class="profile_pic_main_tabs_sec width_95">
  		<div class="profile_pic position-relative profile_edit">
				<div class="profile-pic-icon">
					<img [src]="previewUrl" onerror="this.src='/assets/images/default_user.jpg';">
				</div>
			  <div class="profile_name">{{name}}</div>
  		</div>

  		<div name="top" class="actions" id="myTopnav">
  			<a [routerLink]="['/friends/', login_id]" (click)="timeline_hide = true"><button id="timeline" [routerLinkActive]="['active_tabs']">Timeline</button></a>
  			<!-- <a [routerLink]="['/friends/', login_id]" (click)="timeline_hide = false" *ngIf="timeline_hide"><button id="timeline" [routerLinkActive]="['active_tabs']">Timeline</button></a> -->
  			<a [routerLink]="['about']" (click)="timeline_hide = false"><button id="about" [routerLinkActive]="['active_tabs']">About</button></a>
        <a [routerLink]="['photos']" (click)="timeline_hide = false"><button id="photos" [routerLinkActive]="['active_tabs']">Photos</button></a>
  			<a [routerLink]="['videos']" (click)="timeline_hide = false"><button id="videos" [routerLinkActive]="['active_tabs']">Videos</button></a>
  			<a [routerLink]="['friends']" (click)="timeline_hide = false"><button id="friends" [routerLinkActive]="['active_tabs']">Friends</button></a>
  			<a [routerLink]="['more']" (click)="timeline_hide = false"><button>More</button></a>
  		</div>
  		<div class="main_action"></div>
  	</div>
  </div>

  <div class="main d-flex">
    <div class="main_area load_area">
      <ng-container *ngIf="timeline_hide">
      <div *ngFor="let data of frd_datas; let i = index;" class="main_post_content d-flex flex-column">
        <div class="d-flex" style="width: 100%; margin-bottom: 15px;" (mouseleave)="showbasicProfile[i]=false">
          <div class="profile_pic_profile position-relative" (mouseover)="showbasicProfile[i]=true">
            <img [src]="profileImg" onerror="this.src='/assets/images/default_user.jpg';">

            <div class="basic_info" *ngIf="showbasicProfile[i]" (mouseleave)="showbasicProfile[i]=false">
              <div class="d-flex">
                <img [src]="profileImg" onerror="this.src='/assets/images/default_user.jpg';">
                <div style="padding: 10px;">
                  <a href="profile/{{data.userId}}"><div class="profile_basic_info set_redirect_link">{{name}}</div></a>
                  <div class="profile_basic_info"><i class="fas fa-user-tie" style="margin-right: 10px"></i>{{u_designation}}</div>
                  <div class="profile_basic_info"><i class="fas fa-envelope" style="margin-right: 10px"></i>{{u_email}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="name_and_desc" style="width: 100%">
            <div class="d-flex justify-content-between align-items-center">
              <a href="profile/{{u_id}}"><div class="profile_name_of_poster">{{u_name}}</div></a>
              <div class="province d-flex align-items-center">
                <img src="assets/images/add_ob.png">
                <div *ngIf="u_city !== null && u_state !== null">{{u_city}} {{u_state}}</div>
                <div *ngIf="u_city === undefined && u_state === undefined">Not Mention</div>
              </div>
            </div>
            <div class="item_desc mt-3" style="width: 100%">{{data.description}}</div>
          </div>
        </div>
        <div class="slider_bid_like-share d-flex flex-column" style="width: 100%" id="slider-owl-carousel-load">
          <!-- <div class="owl-carousel owl-theme" id="owl-demo" *ngIf="data.imageUrl.length > 0"> -->
            <!-- <div class="item" *ngFor="let imageurl of data.imageUrl"> -->
            <div *ngIf="data.imageUrl.length == 1">
  						<ng-image-slider [imageSize]="{width: '100%', height: '320px'}"  [showArrow]=false class="slider_image" [images]="data.imageUrl" #nav></ng-image-slider>
  					</div>
  					<div *ngIf="data.imageUrl.length == 2">
  						<div class="item" >
  							<ng-image-slider [infinite]=true [autoSlide]=0 [imageSize]="{width: '50%'}" [showArrow]=false class="slider_image" [images]="data.imageUrl" #nav></ng-image-slider>
  						</div>
  					</div>
  					<div *ngIf="data.imageUrl.length == 3">
  						<div class="item" *ngIf="data.imageUrl[0].size == 100">
  							<ng-image-slider [imageSize]="{width: (data.imageUrl[0].size == 100) ? '100%' : '50%'}" animationSpeed=0.1 [showArrow]=false class="slider_image" [images]="data.imageUrl" #nav></ng-image-slider>
  							<ng-image-slider [infinite]=true [autoSlide]=0 [imageSize]="{width: '50%', height: 200}" [showArrow]=false class="slider_image_2" [images]="data.imageUrl" #nav></ng-image-slider>
  						</div>
  					</div>
  					<div *ngIf="data.imageUrl.length == 4">
  						<div class="item">
  							<ng-image-slider [imageSize]="{width: '50%'}" [showArrow]=false class="slider_image" [images]="data.imageUrl" #nav></ng-image-slider>
  							<ng-image-slider [infinite]=true [autoSlide]=0 [imageSize]="{width: '50%', height: 238}" [showArrow]=false class="slider_image_4" [images]="data.imageUrl" #nav></ng-image-slider>
  						</div>
  					</div>
  					<div *ngIf="data.imageUrl.length > 4">
  						<div class="item">
  							<ng-image-slider [imageSize]="{width: '50%'}" [showArrow]=false class="slider_image" [images]="data.imageUrl" #nav></ng-image-slider>
  							<ng-image-slider [infinite]=true [autoSlide]=0 [imageSize]="{width: '50%', height: 238}" [showArrow]=false class="slider_image_5" [images]="data.imageUrl" title="more" #nav></ng-image-slider>
  						</div>
  					</div>
          <!-- </div> -->
          <div class="take_action">
            <button class="showLikes" (click)="likeIt(data._id, data.like.length);">
              <i class="fa" id="{{data._id}}" [ngClass]="postlikeId.includes(data._id) ? 'fa-thumbs-up': 'fa-thumbs-o-up'"></i>
              <div>Like<span id="count_{{data._id}}">{{data.like.length === 0 ? '' : data.like.length}}</span></div>
            </button>

            <div class="tooltiptext" *ngIf="data.like.length > 0">
              <div *ngFor="let like of data.like">
                {{like.name}}
              </div>
            </div>

            <button class="comment_sec_{{data._id}} comment_sec" (click)="open_comments(data._id)">
              <i class="far fa-comment-dots"></i>
              <div *ngIf="data.comment.length !== 0">Comment<span>{{data.comment.length !== 0 ? (data._id === tempPostId) ? data.comment.length + temCmnt.length : data.comment.length : ''}}</span></div>
              <div *ngIf="data.comment.length === 0">Comment<span>{{data.comment.length === 0 ? (data._id === tempPostId) ? data.comment.length + temCmnt.length : '' :data.comment.length }}</span></div>
            </button>
            <button class="share_sec">
              <i class="far fa-share"></i>
              <div>Share<span>7</span></div>
            </button>
          </div>
          <div class="write_comments">
            <form (ngSubmit)="addComments(data._id, cmntuname, cmntuprofile)" [formGroup]="commentsForm">
              <input type="text" placeholder=" Write a comment...!" formControlName="newcomment">
            </form>
          </div>
          <div class="comments_container_{{data._id}} comments_container" style="display: none;" *ngIf="data.comment.length > 0 || temCmnt.length > 0">
            <div class="comment_title">Comments:</div>
            <ng-container *ngIf="checkTem && tempPostId === data._id">
              <div class="comment_user d-flex"  *ngFor="let temp of temCmnt.slice().reverse()">
                <img [src]="tempProfile" onerror="this.src='/assets/images/default_user.jpg';">
                <div>
                  <div class="commenter">{{tempName}}</div>
                  <div class="comment_here">{{temp}}</div>
                </div>
              </div>
            </ng-container>

            <div (mouseleave)="!showbasicProfile3[i]=false" class="comment_user d-flex" *ngFor="let comnt of data.comment.slice().reverse(); let i = index">
							<img [src]="comnt.profile" onerror="this.src='/assets/images/default_user.jpg';">
							<div>
								<a href="profile/{{comnt.userId}}" (mouseover)="!showbasicProfile3[i]=true"><div class="commenter">{{comnt.name}}</div></a>
							<div class="comment_here">{{comnt.newcomment}}</div>
						</div>		
						<div class="show_basic_info_card" (mouseleave)="showbasicProfile3[i]=false">
							<div class="basic_info2" *ngIf="showbasicProfile3[i]">	
								<div class="d-flex">
									<img [src]="comnt.profile" onerror="this.src='/assets/images/default_user.jpg';" class="hover-info-img">
									<div class="basic_profile_icons">
										<a href="profile/{{comnt.userId}}"><div style="text-transform: capitalize;" class="profile_basic_info set_redirect_link">{{comnt.name}}</div></a>
										<div class="icons_showing_card">
										<div class="profile_basic_info"><i class="fas fa-user-tie" style="padding-right: 10px"></i>{{comnt.designation}}</div>
										<div class="profile_basic_info"><i class="fas fa-envelope" style="margin-right: 10px"></i>{{comnt.email}}</div>
									</div>	
									</div>
								</div>
							</div>
            </div>
            </div>
          </div>
        </div>
      </div>
      <div class="no_post_friend" *ngIf="frd_datas.length == 0">
        <h6>No Posts avalible for this friend</h6>
      </div>
      </ng-container>
      <!-- <ng-container *ngIf="frd_datas.length == 0">
        <div class="main_post_content d-flex flex-column" style="color: #003459">
          <h6>Not time line avalible for this friend</h6>
        </div>
      </ng-container> -->

      <ng-container *ngIf="!timeline_hide">
        <router-outlet></router-outlet>
      </ng-container>
  	</div>
  </div>
</div>
